# 第6章 Linux的文件权限与目录配置
## 6.1 用户与用户组
Linux用户身份与用户组记录的文件

 * /etc/passwd # 默认情况下所有系统上的账号与一般身份用户，还有root相关信息
 * /etc/shadow # 个人的密码记录文件
 * /etc/group  # 组名记录文件

## 6.2 Linux文件概念

### 6.2.1 Linux文件属性
```
➜  ~ ls -al
总用量 72644
dr-xr-x---. 11 root root     4096 10月  6 19:05 .
dr-xr-xr-x. 18 root root     4096 3月  16 2018 ..
-rw-------   1 root root     8663 6月   8 18:01 .bash_history
-rw-r--r--.  1 root root       18 12月 29 2013 .bash_logout
```
* 第一列代表这个文件的类型和权限。第一个字符代表这个文件是“目录、文件或链接文件”
* 第二列代表有多少文件名连接到此节点（i-node）
* 第三列代表这个文件（或目录）的所有者账号
* 第四列表示这个文件的所属用户组
* 第五列代表这个文件的容量大小，单位默认为B
* 第六列代表这个文件的创建文件日期或是最近修改的日期
* 第七列代表为该文件名

### 6.2.2 修改文件属性与权限
* chgrp（change group）
* chown（change owner）
* chmod（change mode） 

### 6.2.4 Linux文件种类与拓展名
#### 文件种类
* 一般文件（-）
* 目录文件（d， directory）
* 连接文件（l， link）
* 设备与设备文件（device）
	- 块（b， block）设备文件， 存储相关， `/dev/sda`
	- 字符（c， character）设备文件, 串行端口的接口设备
* 套接字（s， sockets），`/var/run`
* 管道（F， FIFO， pipe）， 主要目的在解决多个程序同时访问一个文件所造成的错误问题

#### Linux文件拓展名
一个Linux文件能不能被执行，与它的第一列的10个属性相关，与文件名一点关系都没有。下面的拓展名是为了了解该文件是做什么的。

* `*.sh`	脚本或者批处理文件
* `*Z、 *.tar、 *.tar.gz、 *.zip、 *.tgz`	经过打包的压缩文件
* `*.html、 *.php` 网页相关文件

> 从网络传输文件，容易导致文件的权限与属性改变，如下载一个可执行文件在本地系统可能会无法执行

## 6.3 Linux目录配置
### 6.3.1 Linux目录配置标准：FHS
FHS（Filesystem Hierarchy Standard）， 目的是希望让用户了解到已安装软件通常放在哪个目录下。FHS依据文件系统**使用的频繁与否**与**是否允许用户随意改动**，而将目录定义成四种交互作用的形态。
 
   | 可分享的（shareable） | 不可分享的（unshareable）
------- | --------------|-------
不变的（static）    | `/usr`: 软件放置处   `/opt`: 第三方软件     |`/etc`: 配置文件  `/boot`: 开机与内核文件 
可变动的（variable） |`/var/mail`: 用户邮件信箱  `/var/spool/news`: 新闻组    | `/var/run`: 程序相关  `/var/lock`: 程序相关

* **可分享的：**可以分享给其他系统挂载使用的目录， 执行文件、用户的邮件
* **不可分享的：**自己机器上运行的设备文件或者与程序有关的socket文件
* **不变的：**跟随者distribution而不变的数据，函数库、文件说明文件、系统管理员所管理的主机服务配置文件
* **可变动的：**经常改动的数据，登录文件、新闻组等

FHS仅定义了如下三层目录应该放置什么数据

* /(root, 根目录)： 与开机系统有关， 开机、修复、系统修复等操作有关。根目录（/)所在分区应该越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区内，保持根目录越小越好。如此不但性能较好，根目录所在文件系统也不容易出问题
	- `/bin`: 系统放置执行文件的目录， 有`cat chmod chown date mv mkdir cp bash`
	- `/boot`: 放置开机会使用的文件， Linux内核文件、开机菜单、开机配置文件等
	- `/dev`: 存在设备文件， `/dev/null /dev/zero /dev/tty /dev/lp* /dev/hd* /dev/sd`
	- `/etc`: 配置文件， 账号密码文件、服务的起始文件。**FHS建议不要在该文件夹放置可执行文件（binary）**。`/etc/modprobe.conf /etc/X11 /etc/fstab /etc/sysconfig`
		* `/etc/init.d`: 所有服务的默认启动脚本都在这里。如`/etc/init.d/iptables start /etc/init.d/iptables stop`
		* `/etc/xinetd.d`: super daemon管理的各项服务的配置文件目录
		* `/etc/X11`:与X Window有关的配置文件
	- `/home`: 系统默认用户主文件夹
	- `/lib`: 开机使用的函数库，以及在/bin或/sbin下面的命令会调用的函数库
	- `/media`: 放置可删除的设备
	- `mnt`: 挂载额外设备
	- `/opt`: 第三方软件放置
	- `/root`: 系统管理员的主文件夹
	- `sbin`: 放置开机需要的**开机、修复、还原系统所需要的命令**。本机自行安装的软件产生的系统执行文件（system binary），则放置在`/usr/local/sbin`。
	- `/srv`: 一些网络服务启动之后，所需要取用的数据目录。如WWW、FTP
	- `/tmp`: 一般用户或者是正在执行的程序暂时放置文件的地方
	- */lost+found : 使用ext2/ext3产生的目录， 当文件系统发生错误时，将一些丢失的片段放置到这个目录下*
	- */proc : 虚拟文件系统，其放置数据都在内存中，不占硬盘空间， 如系统内核、进程（process）、外部设备的状态以及网络状态*
	- */sys : 虚拟文件系统，不占硬盘空间， 也是记录内核相关的信息，如目前已加载的内核模块与内核检测到的硬件设备信息*
* /usr(UNIX software resource)： 与软件安装/执行有关
* /var(variable)： 与系统运作有关


    
    
    
 
       
   

 
	
  
 
 
